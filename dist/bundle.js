(()=>{var e={738:(e,t,n)=>{const r=n(147),s=n(17),o=n(37);function i(e){console.log(`[dotenv][DEBUG] ${e}`)}const a=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,c=/\\n/g,d=/\r\n|\n|\r/;function u(e,t){const n=Boolean(t&&t.debug),r={};return e.toString().split(d).forEach((function(e,t){const s=e.match(a);if(null!=s){const e=s[1];let t=s[2]||"";const n=t.length-1,o='"'===t[0]&&'"'===t[n];"'"===t[0]&&"'"===t[n]||o?(t=t.substring(1,n),o&&(t=t.replace(c,"\n"))):t=t.trim(),r[e]=t}else n&&i(`did not match key and value when parsing line ${t+1}: ${e}`)})),r}e.exports.config=function(e){let t=s.resolve(process.cwd(),".env"),n="utf8",a=!1;var c;e&&(null!=e.path&&(t="~"===(c=e.path)[0]?s.join(o.homedir(),c.slice(1)):c),null!=e.encoding&&(n=e.encoding),null!=e.debug&&(a=!0));try{const e=u(r.readFileSync(t,{encoding:n}),{debug:a});return Object.keys(e).forEach((function(t){Object.prototype.hasOwnProperty.call(process.env,t)?a&&i(`"${t}" is already defined in \`process.env\` and will not be overwritten`):process.env[t]=e[t]})),{parsed:e}}catch(e){return{error:e}}},e.exports.parse=u},21:(e,t,n)=>{"use strict";n.r(t),n.d(t,{NIL:()=>S,parse:()=>v,stringify:()=>p,v1:()=>g,v3:()=>b,v4:()=>m,v5:()=>j,validate:()=>d,version:()=>k});const r=require("crypto");var s=n.n(r);const o=new Uint8Array(256);let i=o.length;function a(){return i>o.length-16&&(s().randomFillSync(o),i=0),o.slice(i,i+=16)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,d=function(e){return"string"==typeof e&&c.test(e)},u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).substr(1));const p=function(e,t=0){const n=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!d(n))throw TypeError("Stringified UUID is invalid");return n};let l,f,y=0,h=0;const g=function(e,t,n){let r=t&&n||0;const s=t||new Array(16);let o=(e=e||{}).node||l,i=void 0!==e.clockseq?e.clockseq:f;if(null==o||null==i){const t=e.random||(e.rng||a)();null==o&&(o=l=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==i&&(i=f=16383&(t[6]<<8|t[7]))}let c=void 0!==e.msecs?e.msecs:Date.now(),d=void 0!==e.nsecs?e.nsecs:h+1;const u=c-y+(d-h)/1e4;if(u<0&&void 0===e.clockseq&&(i=i+1&16383),(u<0||c>y)&&void 0===e.nsecs&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");y=c,h=d,f=i,c+=122192928e5;const g=(1e4*(268435455&c)+d)%4294967296;s[r++]=g>>>24&255,s[r++]=g>>>16&255,s[r++]=g>>>8&255,s[r++]=255&g;const v=c/4294967296*1e4&268435455;s[r++]=v>>>8&255,s[r++]=255&v,s[r++]=v>>>24&15|16,s[r++]=v>>>16&255,s[r++]=i>>>8|128,s[r++]=255&i;for(let e=0;e<6;++e)s[r+e]=o[e];return t||p(s)},v=function(e){if(!d(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};function w(e,t,n){function r(e,r,s,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=v(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let i=new Uint8Array(16+e.length);if(i.set(r),i.set(e,r.length),i=n(i),i[6]=15&i[6]|t,i[8]=63&i[8]|128,s){o=o||0;for(let e=0;e<16;++e)s[o+e]=i[e];return s}return p(i)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}const b=w("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),s().createHash("md5").update(e).digest()})),m=function(e,t,n){const r=(e=e||{}).random||(e.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return p(r)},j=w("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),s().createHash("sha1").update(e).digest()})),S="00000000-0000-0000-0000-000000000000",k=function(e){if(!d(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},349:(e,t,n)=>{const r=n(685),s=n(361),o=n(963);e.exports=class{constructor(){this.emitter=new s,this.server=this._createServer(),this.middlewares=[]}listen(e,t,n){this.server.listen(e,t,n)}async use(e){this.middlewares.push(e)}addRouter(e){Object.keys(e.endpoints).forEach((t=>{const n=e.endpoints[t];Object.keys(n).forEach((e=>{const r=n[e];this.emitter.on(this._getRouteMask(t,e),((e,t)=>{r(e,t)}))}))}))}_createServer(){return r.createServer(((e,t)=>{let n="";e.on("data",(e=>{n+=e})),e.on("end",(()=>{n&&(e.body=n),this.emitter.emit(this._getRouteMask(e.pathname,e.method),e,t)||(t.writeHead(404),t.end("Page is not exist"))})),this.use(o("http://localhost:8000")),this.middlewares.forEach((n=>n(e,t)))}))}_getRouteMask(e,t){return`[${e}}]:[${t}]`}}},768:(e,t,n)=>{new(n(361)),e.exports={Router:class{constructor(){this.endpoints={}}async request(e="GET",t,n){this.endpoints[t]||(this.endpoints[t]={});const r=this.endpoints[t];if(r[e])throw new Error(`${e} по адресу ${t} уже существует`);r[e]=n}async get(e,t){await this.request("GET",e,t)}async post(e,t){await this.request("POST",e,t)}async put(e,t){await this.request("PUT",e,t)}async delete(e,t){await this.request("DELETE",e,t)}}}},538:(e,t,n)=>{const{v4:r}=n(21);t.create=function(e){return{id:r(),...e}},t.del=function(e,t){return t.filter((t=>t.id!==e))},t.update=function(e,t,n){const r=n.findIndex((e=>e.id===t)),s=[...n],o={...s[r],...e};return s[r]=o,[s,o]}},963:e=>{e.exports=e=>(t,n)=>{const r=new URL(t.url,e).pathname,s="/person/";if(t.url.includes(s)){const e=r.slice(s.length);t.personId=e,t.pathname=s}else t.pathname=r}},729:e=>{e.exports=[]},659:(e,t,n)=>{const{Router:r}=n(768),s=new r,{validateTypes:o,isExist:i,validateUUID:a}=n(269),{create:c,del:d,update:u}=n(538);let p=n(729);s.get("/person",(async(e,t)=>{try{t.writeHead(200,{"Content-type":"application/json"}),t.end(JSON.stringify(p))}catch(e){t.writeHead(500),t.end(e)}})),s.get("/person/",((e,t)=>{try{const n=e.personId;if(!a(n,t))return!1;if(!i(n,t,p))return!1;if(p.find((e=>e.id===n))){const e=p.find((e=>e.id===n));t.writeHead(200,{"Content-type":"application/json"}),t.end(JSON.stringify(e))}}catch(e){t.writeHead(500),t.end(e)}})),s.post("/person",(async(e,t)=>{try{const n=JSON.parse(e.body);if(!o(n,t))return!1;const r=c(n);p=[...p,r],t.writeHead(201,{"Content-type":"application/json"}),t.end(JSON.stringify(r))}catch(e){t.writeHead(500),t.end(e)}})),s.delete("/person/",(async(e,t)=>{try{const n=e.personId;if(!a(n,t))return!1;if(!i(n,t,p))return!1;p=d(n,p),t.writeHead(204,{"Content-type":"application/json"}),t.end()}catch(e){t.writeHead(500),t.end(e)}})),s.put("/person/",(async(e,t)=>{try{const n=e.personId,r=JSON.parse(e.body);if(!o(r,t))return!1;if(!a(n,t))return!1;if(!i(n,t,p))return!1;const[s,c]=u(r,n,p);p=s,t.writeHead(201,{"Content-type":"application/json"}),t.end(JSON.stringify(c))}catch(e){t.writeHead(500),t.end(e)}})),e.exports=s},269:(e,t,n)=>{const r=n(21),s=["name","age","hobbies"],o={name:"string",age:"number",hobbies:"object"};e.exports={validateTypes:function(e,t){const n=Object.keys(e);for(key in e){if(!s.includes(key))return t.writeHead(400,{"Content-type":"application/json"}),t.end(`Person object only contain's ${s} properties`),!1;if(!s.every((e=>n.includes(e))))return t.writeHead(400,{"Content-type":"application/json"}),t.end(`Person object only contain's ${s} properties`),!1;if(typeof e[key]!==o[key]&&"hobbies"!==key)return t.writeHead(400,{"Content-type":"application/json"}),t.end(`Typeof ${key} must be ${o[key]}`),!1;if("hobbies"===key&&!Array.isArray(e[key]))return t.writeHead(400,{"Content-type":"application/json"}),t.end(`Typeof ${key} must be Array`),!1}return!0},isExist:function(e,t,n){return!!n.find((t=>t.id===e))||(t.writeHead(404,{"Content-type":"application/json"}),t.end(`person with id ${e} is not exist`),!1)},validateUUID:function(e,t){return!!r.validate(e)||(t.writeHead(400,{"Content-type":"application/json"}),t.end("PersonId must be type of uuid"),!1)}}},361:e=>{"use strict";e.exports=require("events")},147:e=>{"use strict";e.exports=require("fs")},685:e=>{"use strict";e.exports=require("http")},37:e=>{"use strict";e.exports=require("os")},17:e=>{"use strict";e.exports=require("path")}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{n(738).config();const e=n(349),t=n(659),r=process.env.HOST,s=process.env.PORT,o=new e;o.addRouter(t),o.listen(s,r,(()=>console.log(`Server is running on ${r}: ${s}`)))})()})();